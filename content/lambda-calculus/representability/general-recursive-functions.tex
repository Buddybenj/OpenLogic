% Part: lambda-calculus
% Chapter: representability
% Section: general-recursive-functions

\documentclass[../../../include/open-logic-section]{subfiles}

\begin{document}

\olfileid{lc}{rep}{gen}
\olsection{General recursive functions}

In this chapter we prove the representability of general recursive
functions. The formation of them has one more case than primitive
recursive functions: unbounded search on regular functions. Other
cases is similar, since the lemmas used, only requiring functions to be
total, can be applied here again. 
\begin{prop}
  Every general recursive function is representable.
\end{prop}
\begin{proof}
  \begin{enumerate}
  \item The first three cases are omitted.
  \item If it is formed by an unbounded search on a regular general
    recursive function $f$, with the inductive hypothesis that $f$ is representable,
    we hope the unbounded search $\mu x \; f(x, \vec z)$ is also
    representable. 
  \end{enumerate}
\end{proof}

The missing piece in the last case is what we will prove in this
section:

\begin{lem}
  If a regular function is representable, then the unbounded search on
  it is also representable.
\end{lem}
\begin{proof}
  Given the representation of a regular function $f(x,\vec z)$, the
  representation of an unbounded search on it with parameters $\vec
  z$, $\num{\mu x  f(x,\vec z)}$ can be defined as:
  \begin{align*}
    \num{\mu x  f(x,\vec{z})} &\eqs (Y ~ search) \num{f} \num{0}
                                 \vec{\num{z}} \\
    search &\eqs \lambd[g][\lambd[fx \vec{z}][iszero (\num{f} x \vec{z}) x (g (succ ~ x)
             \vec{z})]]
  \end{align*}
  where $Y$ is any fixpoint combinator. Informally speaking, $search$ is
  a self-referencing function: starting with $\num{x}$, test whether $\num{f} x
  \vec z$ is zero: if so return $x$ instantly, otherwise call itself
  with $succ ~ x$. Thus $(Y ~ search) \num{f} \num{0} \vec{\num{z}}$ returns
  the least $x$ for which $f(x,\vec{\num{z}})$ is zero.
  
  We observe that $(Y ~ search) \num{f} \num{x} \vec{\num{z}}$ reduces to $\num{x}$ if
  $f(x,\vec z)=0$, or reduces to $(Y ~ search) \num{f} \num{x+1} \vec{\num{z}}$
  otherwise. It follows that if $f(x,z) = 0$ for some $x$ and $f(x',z) > 0$ for all $x' < x$,
  then $(Y ~ search) \num{f} \num{0} \vec{\num{z}} \red \num{x}$.
\end{proof}
\end{document}